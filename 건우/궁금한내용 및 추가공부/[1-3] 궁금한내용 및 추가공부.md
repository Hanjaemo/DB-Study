# 1주차 추가 공부 / 의문 / 질문 ... 

## 회원탈퇴

커뮤니티 사이트를 구축한다고 할 때

회원탈퇴에 대한 요구사항이 다음과 같다. 

- 회원탈퇴에는 일정 유예기간이 있다. 일정 유예기간이 종료 후에는 회원을 탈퇴시킨다. 

- 회원탈퇴를 하더라도 해당 회원이 남겼던 글이나 댓글은 삭제되지 않는다.

FK를 사용하면서 다음의 요구사항을 어떻게 충족시킬 수 있을까? (FK 제약조건)

방법 1.

- 테이블의 attribute 하나에서 정상, 탈퇴 유예기간, 탈퇴. 이 3가지를 모두 표시한다.

- 단 이경우 회원에 대한 데이터를 탈퇴 이후에도 계속 DB에 가지고 있다.

방법 2.

- 테이블의 attribute 하나에서 정상, 탈퇴 유예기간을 표시한다.

- 유예기간이 끝나면 해당 id의 모든 속성을 NULL로 표시한다.

- 이 경우에는 회원 탈퇴이후에 회원에 대한 데이터를 가지고 있지 않는다.

방법 3.

- 방법2와 똑같은데, 

  탈퇴된 회원을 관리하는 테이블을 만들어서 따로 보관한다.

## Mysql의 엔진

MySQL은 다양한 엔진을 지원한다.

**[ InnoDB ]**

- MySQL의 기본 스토리지 엔진으로, 트랜잭션 처리와 롤백, 복구 기능을 지원. 

- ACID(원자성, 일관성, 고립성, 지속성) 특성을 제공하여 데이터의 안정성을 보장. 

- 대규모 트랜잭션 처리에 적합합니다.

- MySQL 5.5부터는 InnoDB가 기본 스토리지 엔진이 됨.

**[ MyISAM ]**

- 이전 버전에서 주로 사용되던 스토리지 엔진

- 트랜잭션 처리를 지원하지 않고, 속도가 빠르지만 데이터 무결성을 보장하지 않음.

- 대규모 읽기 작업이 많은 웹 사이트나 블로그에 적합.

- MySQL 5.5 이전의 기본 스토리지 엔진


## 이미 서비스하고 있는 DB의 스키마를 변경하려면?

다운타임없이 하기
https://dolsup.work/tech-blog/update-db-schema-without-downtime/

외부에서 DB 사용이 중지된때
https://jojoldu.tistory.com/244

### DB의 스키마 변경은 정말 신중하게 행해져야 한다.

ex) 인기게시글 기능추가 -> POST에 인기글인지 아닌지 구분하는 속성을 추가함.

이 때, 이 속성을 추가하면 기존의 튜플들은 해당 속성이 다 NULL이 되어버린다.

이렇게 NULL로 된 속성이 기존시스템에 악영향을 미칠수있다. 

스키마를 변경함과 동시에 기존 레코드(튜플)들이 스키마 변경에대한 여파를 맞을수가 있는데,

이것을 잘 고려해야 한다. 

스키마 변경과 동시에 기존 레코드들에 대한 벌크 UPDATE쿼리를 해주어야 할 수 있다.

## 외래키 reference_option을 어떤상황에서 어떻게 걸어야할까